@*AUTO GENCODE SYSTEM - 04/06/2019 15:12*@
@using Kztek.Web.Core.Extensions
@using Kztek.Model.Models
@model MainMenu
@{
	ViewBag.Title = "Thêm mới Quản lý Menu";
	var _urlValue = (string)ViewBag.urlValue;
}
<div class="page-header">
	<h1>
		@ViewBag.Title
	</h1>
</div>
<div class="row">
	@if(TempData["Success"] != null)
	{
		<strong style = "color: green" > @TempData["Success"] </strong>
	}
</div>
<div class="row">
    <div class="col-xs-12">
        @using (Html.BeginForm("Create", "MainMenu", FormMethod.Post, new { encType = "multipart/form-data", @class = "form-horizontal", @role = "form", @id = "frmCreate" }))
        {
            @Html.ValidationMessage("", "", new { @class = "text-danger", @style = "font-size:18; " })
            @Html.Hidden("SaveAndCountinue", false)
            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right"> @Html.LabelFor(m => m.Name)</label>
                <div class="col-sm-6 col-xs-12">
                    @Html.TextBoxFor(n => n.Name, new { @class = "form-control", @placeholder = "" })
                    @Html.ValidationMessageFor(n => n.Name, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right">Chọn @Html.LabelFor(m => m.ParentId) </label>
                <div class="col-sm-4 col-xs-12">
                    @Html.DropDownListFor(n => n.ParentId, new SelectList(ViewBag.ParentIdDDLtree, "ItemValue", "ItemText"), new { @class = "form-control" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right"> @Html.LabelFor(m => m.NameUrl)</label>
                <div class="col-sm-6 col-xs-12">
                    @Html.TextBoxFor(n => n.NameUrl, new { @class = "form-control", @placeholder = "" })
                    @*@Html.ValidationMessageFor(n => n.NameUrl, "", new { @class = "text-danger" })*@
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right"> @Html.LabelFor(m => m.Url)</label>
                <div class="col-sm-6 col-xs-12">
                    @Html.TextBoxFor(n => n.Url, new { @class = "form-control", @placeholder = "" })
                    @*@Html.ValidationMessageFor(n => n.Url, "", new { @class = "text-danger" })*@
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right">@Html.LabelFor(m => m.IconPath)</label>
                <div class="col-sm-6 col-xs-12 center btn-group">
                    @Html.TextBoxFor(c => c.IconPath, new { @class = "form-control" })
                </div>
                <input type="button" id="Browse" value="Browse..." class="btn btn-default" style="height:33px; line-height:15px;" onclick="OpenIconPath()">
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right" for="form-field-4"></label>
                <div class="col-sm-7">
                    <img id="blah_IconPath" src="@string.Format("{0}",Model!=null && !string.IsNullOrWhiteSpace(Model.IconPath)?Model.IconPath:"")" alt="" style="max-width:200px" />
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right">@Html.LabelFor(m => m.CoverPath)</label>
                <div class="col-sm-6 col-xs-12 center btn-group">
                    @Html.TextBoxFor(c => c.CoverPath, new { @class = "form-control" })
                </div>
                <input type="button" id="Browse" value="Browse..." class="btn btn-default" style="height:33px; line-height:15px;" onclick="OpenCoverPath()">
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right" for="form-field-4"></label>
                <div class="col-sm-7">
                    <img id="blah_CoverPath" src="@string.Format("{0}",Model!=null && !string.IsNullOrWhiteSpace(Model.CoverPath)?Model.CoverPath:"")" alt="" style="max-width:200px" />
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right">@Html.LabelFor(m => m.Description) </label>
                <div class="col-sm-6 col-xs-12">
                    @Html.TextAreaFor(n => n.Description, new { @class = "form-control", @rows = "5", @placeholder = "" })
                    @*@Html.ValidationMessageFor(n => n.Description, "", new { @class = "" })*@
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right"> @Html.LabelFor(m => m.Ordering)</label>
                <div class="col-sm-2 col-xs-12">
                    @Html.TextBoxFor(n => n.Ordering, new { @class = "form-control", @placeholder = "", @Value = "0" })
                    @*@Html.ValidationMessageFor(n => n.Ordering, "", new { @class = "text-danger" })*@
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right"> @Html.LabelFor(m => m.Page)</label>
                <div class="col-sm-6 col-xs-12">
                    @Html.DropDownListFor(c => c.Page, new SelectList(ViewBag.Pages, "ItemValue", "ItemText"), new { @class = "col-xs-12 col-sm-7" })
                    @Html.ValidationMessageFor(c => c.Page, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right"> @Html.LabelFor(m => m.Position)</label>
                <div class="col-sm-6 col-xs-12">
                    @Html.DropDownListFor(c => c.Position, new SelectList(ViewBag.Positions, "ItemValue", "ItemText"), new { @class = "col-xs-12 col-sm-7" })
                    @Html.ValidationMessageFor(c => c.Position, "", new { @class = "text-danger" })

                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right"> @Html.LabelFor(m => m.Target)</label>
                <div class="col-sm-6 col-xs-12">
                    @Html.DropDownListFor(c => c.Target, new SelectList(ViewBag.Target, "ItemValue", "ItemText"), new { @class = "col-xs-12 col-sm-7" })

                </div>
            </div>


            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right"> @Html.LabelFor(m => m.Active) </label>
                <div class="col-sm-4">
                    <label class="line-height-250">
                        @Html.CheckBoxFor(n => n.Active, new { @class = "ace", @checked = "true" })
                        <span class="lbl"></span>
                    </label>
                </div>
            </div>

            @Html.Action("Buttons", "Home", new { controller = "MainMenu", action = "Create" })
        }
    </div>
</div>
@section scripts
{
	<script src="~/Scripts/editors/ckeditor/ckeditor.js"></script>
	<script src="~/Scripts/editors/ckfinder/ckfinder.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {
			CKEDITOR.replaceClass = 'ckeditor';
			$('#ac_85695777').addClass('open');
			$('#ac_110443008').addClass('open active');
			$('#Countinue').click(function() {
			$('#SaveAndCountinue').val('true');
				$('#frmCreate').submit();
			});
			$('#CountinueAndClose').click(function() {
				$('#SaveAndCountinue').val('false');
				$('#frmCreate').submit();
			});
			$('#btnBackToHome').click(function() {
				location.href = '@_urlValue';
			});
		});
</script>
<script>
	function OpenIconPath() {
		var finder = new CKFinder();
		finder.selectActionFunction = function (fileUrl) {
		$('#IconPath').val(fileUrl);
		$('#blah_IconPath').css('display', 'block').attr('src', fileUrl).attr('width', 200);
		};
		finder.popup();
	}
	function OpenCoverPath() {
		var finder = new CKFinder();
		finder.selectActionFunction = function (fileUrl) {
		$('#CoverPath').val(fileUrl);
		$('#blah_CoverPath').css('display', 'block').attr('src', fileUrl).attr('width', 200);
		};
		finder.popup();
	}
</script>
}
